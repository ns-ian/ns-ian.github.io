<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
    <title>Arch Installation on Dell XPS 13 (7390) | ianwright.dev</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Tajawal&display=swap">
    <link rel="stylesheet" href="/assets/css/styles.css">
  </head>
  <body>
    <div class="container">
      <div class="row min-vh-100 d-none d-sm-flex">
  <div class="col-sm-3" id="layout-col-left">
    <div class="pt-2 sticky-top">
      <div>
  <img src="/assets/images/me.jpg" alt="me" class="mw-50 img-fluid rounded-circle" id="bio-pic">
</div>
<ul class="nav flex-column pt-3 pb-3">
  
  <li class="nav-item">
    <a class="nav-url" href="/">Home</a>
  </li>
  
  <li class="nav-item">
    <a class="nav-url" href="/about.html">About</a>
  </li>
  
  <li class="nav-item">
    <a class="nav-url" href="/archive.html">Archive</a>
  </li>
  
</ul>
<div>
  <p id="nav-info">
    My name's Ian. I mostly do back end web services stuff. I like black coffee
    and ambient music.
  </p>
  <div class="text-center" id="nav-flare">
    <a href="https://github.com/ns-ian">
      <img src="/assets/images/GitHub-Mark-Light-32px.png">
    </a>
    <a href="https://www.linkedin.com/in/ian-wright-7912657b">
      <img src="/assets/images/In-2C-34px-TM.png">
    </a>
  </div>
</div>

    </div>
  </div>
  <div class="col-sm-9" id="layout-col-right">
    <div class="pt-2">
      <h1>Arch Installation on Dell XPS 13 (7390)</h1>
<p>20 Apr 2021</p>

<article>
  <p>This post serves as an account of, as well as an instructional reference for,
the quirks of installing Arch GNU/Linux on the XPS 13 7390.</p>

<p>I recently purchased one of these machines new, and decided that I wanted Arch
to be the OS that I would install on it. Previously I had installed Arch on my
ThinkPad X220, but that machine’s age and ubiquity meant that I didn’t really
run into any hiccups - most things “just worked” thanks to native kernel
support. Since the 7390 revision of the popular XPS 13 is less than 2 years old
at the time of this writing, there were a few extra things to work through.</p>

<p>Firstly, the community wiki is the definitive reference for getting Arch running
on any compatible machine. In addition to the <a href="https://wiki.archlinux.org/index.php/Installation_guide">installation
guide</a>, there are also
many individual pages dedicated to device-specific issues and tips. See these
pages for the usual procedure for installation of the base system. I’ve also
found the wiki to be an excellent reference for other popular software, and for
Unix in general.</p>

<h4 id="disabling-psr">Disabling PSR</h4>
<p>Panel Self Refresh is a power-saving measure that aims to cut
down on unnecessary display refreshes of static content. With Intel’s i915
chipset, a kernel bug (?) causes the display to flicker on some machines. On
mine, the display would randomly corrupt completely. Adding <code class="language-plaintext highlighter-rouge">i915.enable_psr=0</code>
as a kernel option fixes this issue, at the cost of the battery life it would
otherwise save.</p>

<h4 id="fixing-gtk3-scaling">Fixing GTK3 Scaling</h4>
<p>Although the configuration I purchased includes a 1080p
screen at 96 DPI, I found that I had scaling issues on Firefox. Initially I
believed this to be an issue with Wayland (I’m attempting to leave X behind),
but Firefox appeared incredibly tiny in both Sway and i3. The fix I landed on
was setting the environment variable <code class="language-plaintext highlighter-rouge">GDK_DPI_SCALE</code> to 1.3. This seemed to be
the best option, as Sway does support fractional scaling for the whole display,
but seems to discourage it in their documentation. A similar fix may be required
for apps running QT frontends; I haven’t tried one yet.</p>

<h4 id="adjusting-display-brightness">Adjusting Display Brightness</h4>
<p>The Arch wiki page for this machine advises installing the <code class="language-plaintext highlighter-rouge">acpilight</code> package,
and setting a udev rule, in addition to adding <code class="language-plaintext highlighter-rouge">acpi_backlight=vendor</code> as a
kernel parameter. However I found it was much easier to install <code class="language-plaintext highlighter-rouge">brightnessctl</code>
and add the keymap <code class="language-plaintext highlighter-rouge">bindsym XF86MonBrightnessUp exec brightnessctl set +2%</code> and
a similar mapping for lowering the brightness.</p>

<p>Overall, the installation went very smoothly, and there aren’t too many gotchas
to be concerned about. I may do a followup to this post in the future if I run
into more unexpected and/or obscure issues, though.</p>

</article>

    </div>
    <hr>
    <footer class="text-center text-muted">
      <p>2019, Ian Wright. &#9878; MIT</p>
    </footer>
  </div>
</div>

      <div class="row d-sm-none">
  <div class="col-sm-3 p-0" id="layout-col-left">
    <div>
      <ul class="nav">
        
        <li class="nav-item">
          <a class="nav-link" href="/">Home</a>
        </li>
        
        <li class="nav-item">
          <a class="nav-link" href="/about.html">About</a>
        </li>
        
        <li class="nav-item">
          <a class="nav-link" href="/archive.html">Archive</a>
        </li>
        
      </ul>
    </div>
  </div>
  <div class="col-sm-9" id="layout-col-right">
    <div class="pt-2">
      <h1>Arch Installation on Dell XPS 13 (7390)</h1>
<p>20 Apr 2021</p>

<article>
  <p>This post serves as an account of, as well as an instructional reference for,
the quirks of installing Arch GNU/Linux on the XPS 13 7390.</p>

<p>I recently purchased one of these machines new, and decided that I wanted Arch
to be the OS that I would install on it. Previously I had installed Arch on my
ThinkPad X220, but that machine’s age and ubiquity meant that I didn’t really
run into any hiccups - most things “just worked” thanks to native kernel
support. Since the 7390 revision of the popular XPS 13 is less than 2 years old
at the time of this writing, there were a few extra things to work through.</p>

<p>Firstly, the community wiki is the definitive reference for getting Arch running
on any compatible machine. In addition to the <a href="https://wiki.archlinux.org/index.php/Installation_guide">installation
guide</a>, there are also
many individual pages dedicated to device-specific issues and tips. See these
pages for the usual procedure for installation of the base system. I’ve also
found the wiki to be an excellent reference for other popular software, and for
Unix in general.</p>

<h4 id="disabling-psr">Disabling PSR</h4>
<p>Panel Self Refresh is a power-saving measure that aims to cut
down on unnecessary display refreshes of static content. With Intel’s i915
chipset, a kernel bug (?) causes the display to flicker on some machines. On
mine, the display would randomly corrupt completely. Adding <code class="language-plaintext highlighter-rouge">i915.enable_psr=0</code>
as a kernel option fixes this issue, at the cost of the battery life it would
otherwise save.</p>

<h4 id="fixing-gtk3-scaling">Fixing GTK3 Scaling</h4>
<p>Although the configuration I purchased includes a 1080p
screen at 96 DPI, I found that I had scaling issues on Firefox. Initially I
believed this to be an issue with Wayland (I’m attempting to leave X behind),
but Firefox appeared incredibly tiny in both Sway and i3. The fix I landed on
was setting the environment variable <code class="language-plaintext highlighter-rouge">GDK_DPI_SCALE</code> to 1.3. This seemed to be
the best option, as Sway does support fractional scaling for the whole display,
but seems to discourage it in their documentation. A similar fix may be required
for apps running QT frontends; I haven’t tried one yet.</p>

<h4 id="adjusting-display-brightness">Adjusting Display Brightness</h4>
<p>The Arch wiki page for this machine advises installing the <code class="language-plaintext highlighter-rouge">acpilight</code> package,
and setting a udev rule, in addition to adding <code class="language-plaintext highlighter-rouge">acpi_backlight=vendor</code> as a
kernel parameter. However I found it was much easier to install <code class="language-plaintext highlighter-rouge">brightnessctl</code>
and add the keymap <code class="language-plaintext highlighter-rouge">bindsym XF86MonBrightnessUp exec brightnessctl set +2%</code> and
a similar mapping for lowering the brightness.</p>

<p>Overall, the installation went very smoothly, and there aren’t too many gotchas
to be concerned about. I may do a followup to this post in the future if I run
into more unexpected and/or obscure issues, though.</p>

</article>

    </div>
    <hr>
    <footer class="text-center text-muted">
      <p>2019, Ian Wright. &#9878; MIT</p>
    </footer>
  </div>
</div>

    </div>
  </body>
</html>
